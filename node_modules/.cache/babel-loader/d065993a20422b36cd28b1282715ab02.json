{"ast":null,"code":"import _toConsumableArray from\"/Users/tomlaczik/research/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";import _classCallCheck from\"/Users/tomlaczik/research/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Users/tomlaczik/research/node_modules/@babel/runtime/helpers/esm/createClass\";import _inherits from\"/Users/tomlaczik/research/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/Users/tomlaczik/research/node_modules/@babel/runtime/helpers/esm/createSuper\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import React,{Component}from\"react\";import{FlexibleWidthXYPlot,HorizontalGridLines,LineSeries,MarkSeries,XAxis,YAxis}from\"react-vis\";import\"./GlobalExplanation.css\";export var GlobalExplanation=/*#__PURE__*/function(_Component){_inherits(GlobalExplanation,_Component);var _super=_createSuper(GlobalExplanation);function GlobalExplanation(props){var _this;_classCallCheck(this,GlobalExplanation);_this=_super.call(this,props);var feature=props.feature,data=props.data;_this.state={selectedDataPoint:[],dataPoints:data.reduce(function(previousRows,currentRow){var currentX=currentRow[feature];var firstBiggerElementIndex=previousRows.findIndex(function(previousRow){return previousRow.x>currentX;});var insertionIndex=firstBiggerElementIndex<0?previousRows.length:firstBiggerElementIndex;return[].concat(_toConsumableArray(previousRows.slice(0,insertionIndex)),[{x:currentX,y:currentX*Math.random()}],_toConsumableArray(previousRows.slice(insertionIndex)));},[])};return _this;}_createClass(GlobalExplanation,[{key:\"render\",value:function render(){var feature=this.props.feature;var _this$state=this.state,dataPoints=_this$state.dataPoints,selectedDataPoint=_this$state.selectedDataPoint;return/*#__PURE__*/_jsxs(\"div\",{className:\"global-explanation\",children:[feature,/*#__PURE__*/_jsxs(FlexibleWidthXYPlot,{height:200,children:[/*#__PURE__*/_jsx(HorizontalGridLines,{}),/*#__PURE__*/_jsx(LineSeries,{color:\"blue\",data:dataPoints}),/*#__PURE__*/_jsx(MarkSeries,{color:\"orange\",data:selectedDataPoint}),/*#__PURE__*/_jsx(XAxis,{}),/*#__PURE__*/_jsx(YAxis,{})]})]});}},{key:\"componentDidUpdate\",value:function componentDidUpdate(prevProps){var selectedRowIndex=this.props.selectedRowIndex;if(prevProps.selectedRowIndex!==selectedRowIndex){var _this$props=this.props,feature=_this$props.feature,data=_this$props.data;var dataPoints=this.state.dataPoints;this.setState({selectedDataPoint:[dataPoints.find(function(dataPoint){return dataPoint.x===data[selectedRowIndex][feature];})]});}}}]);return GlobalExplanation;}(Component);","map":{"version":3,"sources":["/Users/tomlaczik/research/src/components/GlobalExplanations/GlobalExplanation.js"],"names":["React","Component","FlexibleWidthXYPlot","HorizontalGridLines","LineSeries","MarkSeries","XAxis","YAxis","GlobalExplanation","props","feature","data","state","selectedDataPoint","dataPoints","reduce","previousRows","currentRow","currentX","firstBiggerElementIndex","findIndex","previousRow","x","insertionIndex","length","slice","y","Math","random","prevProps","selectedRowIndex","setState","find","dataPoint"],"mappings":"4mBAAA,MAAOA,CAAAA,KAAP,EAAgBC,SAAhB,KAAiC,OAAjC,CACA,OACEC,mBADF,CAEEC,mBAFF,CAGEC,UAHF,CAIEC,UAJF,CAKEC,KALF,CAMEC,KANF,KAOO,WAPP,CASA,MAAO,yBAAP,CAEA,UAAaC,CAAAA,iBAAb,sHACE,2BAAYC,KAAZ,CAAmB,mDACjB,uBAAMA,KAAN,EADiB,GAGTC,CAAAA,OAHS,CAGSD,KAHT,CAGTC,OAHS,CAGAC,IAHA,CAGSF,KAHT,CAGAE,IAHA,CAIjB,MAAKC,KAAL,CAAa,CACXC,iBAAiB,CAAE,EADR,CAEXC,UAAU,CAAEH,IAAI,CAACI,MAAL,CAAY,SAACC,YAAD,CAAeC,UAAf,CAA8B,CACpD,GAAMC,CAAAA,QAAQ,CAAGD,UAAU,CAACP,OAAD,CAA3B,CAEA,GAAMS,CAAAA,uBAAuB,CAAGH,YAAY,CAACI,SAAb,CAC9B,SAACC,WAAD,QAAiBA,CAAAA,WAAW,CAACC,CAAZ,CAAgBJ,QAAjC,EAD8B,CAAhC,CAIA,GAAMK,CAAAA,cAAc,CAClBJ,uBAAuB,CAAG,CAA1B,CACIH,YAAY,CAACQ,MADjB,CAEIL,uBAHN,CAKA,mCACKH,YAAY,CAACS,KAAb,CAAmB,CAAnB,CAAsBF,cAAtB,CADL,GAEE,CACED,CAAC,CAAEJ,QADL,CAEEQ,CAAC,CAAER,QAAQ,CAAGS,IAAI,CAACC,MAAL,EAFhB,CAFF,qBAMKZ,YAAY,CAACS,KAAb,CAAmBF,cAAnB,CANL,GAQD,CApBW,CAoBT,EApBS,CAFD,CAAb,CAJiB,aA4BlB,CA7BH,qEA+BW,IACCb,CAAAA,OADD,CACa,KAAKD,KADlB,CACCC,OADD,iBAEmC,KAAKE,KAFxC,CAECE,UAFD,aAECA,UAFD,CAEaD,iBAFb,aAEaA,iBAFb,CAGP,mBACE,aAAK,SAAS,CAAC,oBAAf,WACGH,OADH,cAGE,MAAC,mBAAD,EAAqB,MAAM,CAAE,GAA7B,wBACE,KAAC,mBAAD,IADF,cAEE,KAAC,UAAD,EAAY,KAAK,CAAC,MAAlB,CAAyB,IAAI,CAAEI,UAA/B,EAFF,cAGE,KAAC,UAAD,EAAY,KAAK,CAAC,QAAlB,CAA2B,IAAI,CAAED,iBAAjC,EAHF,cAIE,KAAC,KAAD,IAJF,cAKE,KAAC,KAAD,IALF,GAHF,GADF,CAaD,CA/CH,8DAiDqBgB,SAjDrB,CAiDgC,IACpBC,CAAAA,gBADoB,CACC,KAAKrB,KADN,CACpBqB,gBADoB,CAE5B,GAAID,SAAS,CAACC,gBAAV,GAA+BA,gBAAnC,CAAqD,iBACzB,KAAKrB,KADoB,CAC3CC,OAD2C,aAC3CA,OAD2C,CAClCC,IADkC,aAClCA,IADkC,IAE3CG,CAAAA,UAF2C,CAE5B,KAAKF,KAFuB,CAE3CE,UAF2C,CAGnD,KAAKiB,QAAL,CAAc,CACZlB,iBAAiB,CAAE,CACjBC,UAAU,CAACkB,IAAX,CACE,SAACC,SAAD,QAAeA,CAAAA,SAAS,CAACX,CAAV,GAAgBX,IAAI,CAACmB,gBAAD,CAAJ,CAAuBpB,OAAvB,CAA/B,EADF,CADiB,CADP,CAAd,EAOD,CACF,CA9DH,+BAAuCT,SAAvC","sourcesContent":["import React, { Component } from \"react\";\nimport {\n  FlexibleWidthXYPlot,\n  HorizontalGridLines,\n  LineSeries,\n  MarkSeries,\n  XAxis,\n  YAxis,\n} from \"react-vis\";\n\nimport \"./GlobalExplanation.css\";\n\nexport class GlobalExplanation extends Component {\n  constructor(props) {\n    super(props);\n\n    const { feature, data } = props;\n    this.state = {\n      selectedDataPoint: [],\n      dataPoints: data.reduce((previousRows, currentRow) => {\n        const currentX = currentRow[feature];\n\n        const firstBiggerElementIndex = previousRows.findIndex(\n          (previousRow) => previousRow.x > currentX\n        );\n\n        const insertionIndex =\n          firstBiggerElementIndex < 0\n            ? previousRows.length\n            : firstBiggerElementIndex;\n\n        return [\n          ...previousRows.slice(0, insertionIndex),\n          {\n            x: currentX,\n            y: currentX * Math.random(),\n          },\n          ...previousRows.slice(insertionIndex),\n        ];\n      }, []),\n    };\n  }\n\n  render() {\n    const { feature } = this.props;\n    const { dataPoints, selectedDataPoint } = this.state;\n    return (\n      <div className=\"global-explanation\">\n        {feature}\n\n        <FlexibleWidthXYPlot height={200}>\n          <HorizontalGridLines />\n          <LineSeries color=\"blue\" data={dataPoints} />\n          <MarkSeries color=\"orange\" data={selectedDataPoint} />\n          <XAxis />\n          <YAxis />\n        </FlexibleWidthXYPlot>\n      </div>\n    );\n  }\n\n  componentDidUpdate(prevProps) {\n    const { selectedRowIndex } = this.props;\n    if (prevProps.selectedRowIndex !== selectedRowIndex) {\n      const { feature, data } = this.props;\n      const { dataPoints } = this.state;\n      this.setState({\n        selectedDataPoint: [\n          dataPoints.find(\n            (dataPoint) => dataPoint.x === data[selectedRowIndex][feature]\n          ),\n        ],\n      });\n    }\n  }\n}\n"]},"metadata":{},"sourceType":"module"}