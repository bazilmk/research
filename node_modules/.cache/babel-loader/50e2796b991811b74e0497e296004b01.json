{"ast":null,"code":"import * as d3 from \"d3\";\nvar node = document.createElement(\"div\"); // set the dimensions and margins of the graph\n\nvar margin = {\n  top: 40,\n  right: 150,\n  bottom: 60,\n  left: 30\n},\n    width = 500 - margin.left - margin.right,\n    height = 420 - margin.top - margin.bottom; // append the svg object to the body of the page\n\nvar svg = d3.select(node).append(\"svg\").attr(\"width\", width + margin.left + margin.right).attr(\"height\", height + margin.top + margin.bottom).append(\"g\").attr(\"transform\", \"translate(\" + margin.left + \",\" + margin.top + \")\"); //Read the data\n\nd3.csv(\"https://raw.githubusercontent.com/holtzy/data_to_viz/master/Example_dataset/4_ThreeNum.csv\", function (data) {\n  // ---------------------------//\n  //       AXIS  AND SCALE      //\n  // ---------------------------//\n  // Add X axis\n  var x = d3.scaleLinear().domain([0, 45000]).range([0, width]);\n  svg.append(\"g\").attr(\"transform\", \"translate(0,\" + height + \")\").call(d3.axisBottom(x).ticks(3)); // Add X axis label:\n\n  svg.append(\"text\").attr(\"text-anchor\", \"end\").attr(\"x\", width).attr(\"y\", height + 50).text(\"Gdp per Capita\"); // Add Y axis\n\n  var y = d3.scaleLinear().domain([35, 90]).range([height, 0]);\n  svg.append(\"g\").call(d3.axisLeft(y)); // Add Y axis label:\n\n  svg.append(\"text\").attr(\"text-anchor\", \"end\").attr(\"x\", 0).attr(\"y\", -20).text(\"Life expectancy\").attr(\"text-anchor\", \"start\"); // Add a scale for bubble size\n\n  var z = d3.scaleSqrt().domain([200000, 1310000000]).range([2, 30]); // Add a scale for bubble color\n\n  var myColor = d3.scaleOrdinal().domain([\"Asia\", \"Europe\", \"Americas\", \"Africa\", \"Oceania\"]).range(d3.schemeSet1); // ---------------------------//\n  //      TOOLTIP               //\n  // ---------------------------//\n  // -1- Create a tooltip div that is hidden by default:\n\n  var tooltip = d3.select(\"#my_dataviz\").append(\"div\").style(\"opacity\", 0).attr(\"class\", \"tooltip\").style(\"background-color\", \"black\").style(\"border-radius\", \"5px\").style(\"padding\", \"10px\").style(\"color\", \"white\"); // -2- Create 3 functions to show / update (when mouse move but stay on same circle) / hide the tooltip\n\n  /*var showTooltip = function (d) {\n    tooltip.transition().duration(200);\n    tooltip\n      .style(\"opacity\", 1)\n      .html(\"Country: \" + d.country)\n      .style(\"left\", d3.mouse(this)[0] + 30 + \"px\")\n      .style(\"top\", d3.mouse(this)[1] + 30 + \"px\");\n  };\n  var moveTooltip = function (d) {\n    tooltip\n      .style(\"left\", d3.mouse(this)[0] + 30 + \"px\")\n      .style(\"top\", d3.mouse(this)[1] + 30 + \"px\");\n  };\n  var hideTooltip = function (d) {\n    tooltip.transition().duration(200).style(\"opacity\", 0);\n  };*/\n  // ---------------------------//\n  //       HIGHLIGHT GROUP      //\n  // ---------------------------//\n  // What to do when one group is hovered\n\n  var highlight = function (d) {\n    // reduce opacity of all groups\n    d3.selectAll(\".bubbles\").style(\"opacity\", 0.05); // expect the one that is hovered\n\n    d3.selectAll(\".\" + d).style(\"opacity\", 1);\n  }; // And when it is not hovered anymore\n\n\n  var noHighlight = function (d) {\n    d3.selectAll(\".bubbles\").style(\"opacity\", 1);\n  }; // ---------------------------//\n  //       CIRCLES              //\n  // ---------------------------//\n  // Add dots\n\n\n  svg.append(\"g\").selectAll(\"dot\").data(data).enter().append(\"circle\").attr(\"class\", function (d) {\n    return \"bubbles \" + d.continent;\n  }).attr(\"cx\", function (d) {\n    return x(d.gdpPercap);\n  }).attr(\"cy\", function (d) {\n    return y(d.lifeExp);\n  }).attr(\"r\", function (d) {\n    return z(d.pop);\n  }).style(\"fill\", function (d) {\n    return myColor(d.continent);\n  }); // -3- Trigger the functions for hover\n\n  /*.on(\"mouseover\", showTooltip)\n    .on(\"mousemove\", moveTooltip)\n    .on(\"mouseleave\", hideTooltip)*/\n  // ---------------------------//\n  //       LEGEND              //\n  // ---------------------------//\n  // Add legend: circles\n\n  var valuesToShow = [10000000, 100000000, 1000000000];\n  var xCircle = 390;\n  var xLabel = 440;\n  svg.selectAll(\"legend\").data(valuesToShow).enter().append(\"circle\").attr(\"cx\", xCircle).attr(\"cy\", function (d) {\n    return height - 100 - z(d);\n  }).attr(\"r\", function (d) {\n    return z(d);\n  }).style(\"fill\", \"none\").attr(\"stroke\", \"black\"); // Add legend: segments\n\n  svg.selectAll(\"legend\").data(valuesToShow).enter().append(\"line\").attr(\"x1\", function (d) {\n    return xCircle + z(d);\n  }).attr(\"x2\", xLabel).attr(\"y1\", function (d) {\n    return height - 100 - z(d);\n  }).attr(\"y2\", function (d) {\n    return height - 100 - z(d);\n  }).attr(\"stroke\", \"black\").style(\"stroke-dasharray\", \"2,2\"); // Add legend: labels\n\n  svg.selectAll(\"legend\").data(valuesToShow).enter().append(\"text\").attr(\"x\", xLabel).attr(\"y\", function (d) {\n    return height - 100 - z(d);\n  }).text(function (d) {\n    return d / 1000000;\n  }).style(\"font-size\", 10).attr(\"alignment-baseline\", \"middle\"); // Legend title\n\n  svg.append(\"text\").attr(\"x\", xCircle).attr(\"y\", height - 100 + 30).text(\"Population (M)\").attr(\"text-anchor\", \"middle\"); // Add one dot in the legend for each name.\n\n  var size = 20;\n  var allgroups = [\"Asia\", \"Europe\", \"Americas\", \"Africa\", \"Oceania\"];\n  svg.selectAll(\"myrect\").data(allgroups).enter().append(\"circle\").attr(\"cx\", 390).attr(\"cy\", function (d, i) {\n    return 10 + i * (size + 5);\n  }) // 100 is where the first dot appears. 25 is the distance between dots\n  .attr(\"r\", 7).style(\"fill\", function (d) {\n    return myColor(d);\n  }).on(\"mouseover\", highlight).on(\"mouseleave\", noHighlight); // Add labels beside legend dots\n\n  svg.selectAll(\"mylabels\").data(allgroups).enter().append(\"text\").attr(\"x\", 390 + size * 0.8).attr(\"y\", function (d, i) {\n    return i * (size + 5) + size / 2;\n  }) // 100 is where the first dot appears. 25 is the distance between dots\n  .style(\"fill\", function (d) {\n    return myColor(d);\n  }).text(function (d) {\n    return d;\n  }).attr(\"text-anchor\", \"left\").style(\"alignment-baseline\", \"middle\").on(\"mouseover\", highlight).on(\"mouseleave\", noHighlight);\n});\nexport default node;","map":{"version":3,"sources":["/Users/tomlaczik/research/src/d3data.js"],"names":["d3","node","document","createElement","margin","top","right","bottom","left","width","height","svg","select","append","attr","csv","data","x","scaleLinear","domain","range","call","axisBottom","ticks","text","y","axisLeft","z","scaleSqrt","myColor","scaleOrdinal","schemeSet1","tooltip","style","highlight","d","selectAll","noHighlight","enter","continent","gdpPercap","lifeExp","pop","valuesToShow","xCircle","xLabel","size","allgroups","i","on"],"mappings":"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","sourcesContent":["import * as d3 from \"d3\";\n\nvar node = document.createElement(\"div\");\n\n// set the dimensions and margins of the graph\nvar margin = { top: 40, right: 150, bottom: 60, left: 30 },\n  width = 500 - margin.left - margin.right,\n  height = 420 - margin.top - margin.bottom;\n\n// append the svg object to the body of the page\nvar svg = d3\n  .select(node)\n  .append(\"svg\")\n  .attr(\"width\", width + margin.left + margin.right)\n  .attr(\"height\", height + margin.top + margin.bottom)\n  .append(\"g\")\n  .attr(\"transform\", \"translate(\" + margin.left + \",\" + margin.top + \")\");\n\n//Read the data\nd3.csv(\n  \"https://raw.githubusercontent.com/holtzy/data_to_viz/master/Example_dataset/4_ThreeNum.csv\",\n  function (data) {\n    // ---------------------------//\n    //       AXIS  AND SCALE      //\n    // ---------------------------//\n\n    // Add X axis\n    var x = d3.scaleLinear().domain([0, 45000]).range([0, width]);\n    svg\n      .append(\"g\")\n      .attr(\"transform\", \"translate(0,\" + height + \")\")\n      .call(d3.axisBottom(x).ticks(3));\n\n    // Add X axis label:\n    svg\n      .append(\"text\")\n      .attr(\"text-anchor\", \"end\")\n      .attr(\"x\", width)\n      .attr(\"y\", height + 50)\n      .text(\"Gdp per Capita\");\n\n    // Add Y axis\n    var y = d3.scaleLinear().domain([35, 90]).range([height, 0]);\n    svg.append(\"g\").call(d3.axisLeft(y));\n\n    // Add Y axis label:\n    svg\n      .append(\"text\")\n      .attr(\"text-anchor\", \"end\")\n      .attr(\"x\", 0)\n      .attr(\"y\", -20)\n      .text(\"Life expectancy\")\n      .attr(\"text-anchor\", \"start\");\n\n    // Add a scale for bubble size\n    var z = d3.scaleSqrt().domain([200000, 1310000000]).range([2, 30]);\n\n    // Add a scale for bubble color\n    var myColor = d3\n      .scaleOrdinal()\n      .domain([\"Asia\", \"Europe\", \"Americas\", \"Africa\", \"Oceania\"])\n      .range(d3.schemeSet1);\n\n    // ---------------------------//\n    //      TOOLTIP               //\n    // ---------------------------//\n\n    // -1- Create a tooltip div that is hidden by default:\n    var tooltip = d3\n      .select(\"#my_dataviz\")\n      .append(\"div\")\n      .style(\"opacity\", 0)\n      .attr(\"class\", \"tooltip\")\n      .style(\"background-color\", \"black\")\n      .style(\"border-radius\", \"5px\")\n      .style(\"padding\", \"10px\")\n      .style(\"color\", \"white\");\n\n    // -2- Create 3 functions to show / update (when mouse move but stay on same circle) / hide the tooltip\n    /*var showTooltip = function (d) {\n      tooltip.transition().duration(200);\n      tooltip\n        .style(\"opacity\", 1)\n        .html(\"Country: \" + d.country)\n        .style(\"left\", d3.mouse(this)[0] + 30 + \"px\")\n        .style(\"top\", d3.mouse(this)[1] + 30 + \"px\");\n    };\n    var moveTooltip = function (d) {\n      tooltip\n        .style(\"left\", d3.mouse(this)[0] + 30 + \"px\")\n        .style(\"top\", d3.mouse(this)[1] + 30 + \"px\");\n    };\n    var hideTooltip = function (d) {\n      tooltip.transition().duration(200).style(\"opacity\", 0);\n    };*/\n\n    // ---------------------------//\n    //       HIGHLIGHT GROUP      //\n    // ---------------------------//\n\n    // What to do when one group is hovered\n    var highlight = function (d) {\n      // reduce opacity of all groups\n      d3.selectAll(\".bubbles\").style(\"opacity\", 0.05);\n      // expect the one that is hovered\n      d3.selectAll(\".\" + d).style(\"opacity\", 1);\n    };\n\n    // And when it is not hovered anymore\n    var noHighlight = function (d) {\n      d3.selectAll(\".bubbles\").style(\"opacity\", 1);\n    };\n\n    // ---------------------------//\n    //       CIRCLES              //\n    // ---------------------------//\n\n    // Add dots\n    svg\n      .append(\"g\")\n      .selectAll(\"dot\")\n      .data(data)\n      .enter()\n      .append(\"circle\")\n      .attr(\"class\", function (d) {\n        return \"bubbles \" + d.continent;\n      })\n      .attr(\"cx\", function (d) {\n        return x(d.gdpPercap);\n      })\n      .attr(\"cy\", function (d) {\n        return y(d.lifeExp);\n      })\n      .attr(\"r\", function (d) {\n        return z(d.pop);\n      })\n      .style(\"fill\", function (d) {\n        return myColor(d.continent);\n      });\n    // -3- Trigger the functions for hover\n    /*.on(\"mouseover\", showTooltip)\n      .on(\"mousemove\", moveTooltip)\n      .on(\"mouseleave\", hideTooltip)*/\n\n    // ---------------------------//\n    //       LEGEND              //\n    // ---------------------------//\n\n    // Add legend: circles\n    var valuesToShow = [10000000, 100000000, 1000000000];\n    var xCircle = 390;\n    var xLabel = 440;\n    svg\n      .selectAll(\"legend\")\n      .data(valuesToShow)\n      .enter()\n      .append(\"circle\")\n      .attr(\"cx\", xCircle)\n      .attr(\"cy\", function (d) {\n        return height - 100 - z(d);\n      })\n      .attr(\"r\", function (d) {\n        return z(d);\n      })\n      .style(\"fill\", \"none\")\n      .attr(\"stroke\", \"black\");\n\n    // Add legend: segments\n    svg\n      .selectAll(\"legend\")\n      .data(valuesToShow)\n      .enter()\n      .append(\"line\")\n      .attr(\"x1\", function (d) {\n        return xCircle + z(d);\n      })\n      .attr(\"x2\", xLabel)\n      .attr(\"y1\", function (d) {\n        return height - 100 - z(d);\n      })\n      .attr(\"y2\", function (d) {\n        return height - 100 - z(d);\n      })\n      .attr(\"stroke\", \"black\")\n      .style(\"stroke-dasharray\", \"2,2\");\n\n    // Add legend: labels\n    svg\n      .selectAll(\"legend\")\n      .data(valuesToShow)\n      .enter()\n      .append(\"text\")\n      .attr(\"x\", xLabel)\n      .attr(\"y\", function (d) {\n        return height - 100 - z(d);\n      })\n      .text(function (d) {\n        return d / 1000000;\n      })\n      .style(\"font-size\", 10)\n      .attr(\"alignment-baseline\", \"middle\");\n\n    // Legend title\n    svg\n      .append(\"text\")\n      .attr(\"x\", xCircle)\n      .attr(\"y\", height - 100 + 30)\n      .text(\"Population (M)\")\n      .attr(\"text-anchor\", \"middle\");\n\n    // Add one dot in the legend for each name.\n    var size = 20;\n    var allgroups = [\"Asia\", \"Europe\", \"Americas\", \"Africa\", \"Oceania\"];\n    svg\n      .selectAll(\"myrect\")\n      .data(allgroups)\n      .enter()\n      .append(\"circle\")\n      .attr(\"cx\", 390)\n      .attr(\"cy\", function (d, i) {\n        return 10 + i * (size + 5);\n      }) // 100 is where the first dot appears. 25 is the distance between dots\n      .attr(\"r\", 7)\n      .style(\"fill\", function (d) {\n        return myColor(d);\n      })\n      .on(\"mouseover\", highlight)\n      .on(\"mouseleave\", noHighlight);\n\n    // Add labels beside legend dots\n    svg\n      .selectAll(\"mylabels\")\n      .data(allgroups)\n      .enter()\n      .append(\"text\")\n      .attr(\"x\", 390 + size * 0.8)\n      .attr(\"y\", function (d, i) {\n        return i * (size + 5) + size / 2;\n      }) // 100 is where the first dot appears. 25 is the distance between dots\n      .style(\"fill\", function (d) {\n        return myColor(d);\n      })\n      .text(function (d) {\n        return d;\n      })\n      .attr(\"text-anchor\", \"left\")\n      .style(\"alignment-baseline\", \"middle\")\n      .on(\"mouseover\", highlight)\n      .on(\"mouseleave\", noHighlight);\n  }\n);\n\nexport default node;\n"]},"metadata":{},"sourceType":"module"}