{"ast":null,"code":"import _toConsumableArray from\"/Users/tomlaczik/research/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";import _objectSpread from\"/Users/tomlaczik/research/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _classCallCheck from\"/Users/tomlaczik/research/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Users/tomlaczik/research/node_modules/@babel/runtime/helpers/esm/createClass\";import _assertThisInitialized from\"/Users/tomlaczik/research/node_modules/@babel/runtime/helpers/esm/assertThisInitialized\";import _inherits from\"/Users/tomlaczik/research/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/Users/tomlaczik/research/node_modules/@babel/runtime/helpers/esm/createSuper\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";import{jsx as _jsx}from\"react/jsx-runtime\";import React,{Component}from\"react\";import{FlexibleXYPlot,HorizontalGridLines,Treemap,VerticalBarSeries,XAxis,YAxis}from\"react-vis\";import{Tooltip}from\"..\";import\"./LocalExplanation.css\";var COLORS={red:\"#bf212f\",green:\"#006f3c\"};export var LocalExplanation=/*#__PURE__*/function(_Component){_inherits(LocalExplanation,_Component);var _super=_createSuper(LocalExplanation);function LocalExplanation(props){var _this;_classCallCheck(this,LocalExplanation);_this=_super.call(this,props);_this.state={dimensions:{width:0,height:0},displayMode:\"resquarify\"};_this.resetTooltipData=_this.resetTooltipData.bind(_assertThisInitialized(_this));_this.updateTooltipData=_this.updateTooltipData.bind(_assertThisInitialized(_this));_this.updateSize=_this.updateSize.bind(_assertThisInitialized(_this));_this.getPositiveChildren=_this.getPositiveChildren.bind(_assertThisInitialized(_this));_this.getNegativeChildren=_this.getNegativeChildren.bind(_assertThisInitialized(_this));_this.getChildren=_this.getChildren.bind(_assertThisInitialized(_this));_this.getDataForWaterfall=_this.getDataForWaterfall.bind(_assertThisInitialized(_this));return _this;}_createClass(LocalExplanation,[{key:\"render\",value:function render(){var _this2=this;var selectedRowIndex=this.props.selectedRowIndex;var _this$state=this.state,data=_this$state.data,dimensions=_this$state.dimensions,displayMode=_this$state.displayMode,tooltipData=_this$state.tooltipData;return/*#__PURE__*/_jsx(\"section\",{id:\"treemap-container\",ref:this.updateSize,onMouseLeave:this.resetTooltipData,children:selectedRowIndex===undefined?\"Select a row in the table below\":/*#__PURE__*/_jsxs(_Fragment,{children:[displayMode===\"waterfall\"?/*#__PURE__*/_jsxs(FlexibleXYPlot,{xType:\"ordinal\",children:[/*#__PURE__*/_jsx(HorizontalGridLines,{}),/*#__PURE__*/_jsx(VerticalBarSeries,{data:data,colorType:\"literal\",onValueMouseOver:function onValueMouseOver(data){return _this2.updateTooltipData({title:data.x,size:data.y-data.y0,color:data.color});}}),/*#__PURE__*/_jsx(XAxis,{title:\"Feature\",tickLabelAngle:270}),/*#__PURE__*/_jsx(YAxis,{title:\"Contribution\"})]}):/*#__PURE__*/_jsx(Treemap,_objectSpread({title:\"Test\",data:data,mode:displayMode,hideRootNode:true,colorType:\"literal\",onLeafMouseOver:function onLeafMouseOver(_ref){var data=_ref.data;return _this2.updateTooltipData(data);},onLeafClick:function onLeafClick(){for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}return console.log(\"klikk\",[args]);},padding:1,margin:0},dimensions)),/*#__PURE__*/_jsx(Tooltip,{data:tooltipData})]})});}},{key:\"resetTooltipData\",value:function resetTooltipData(){this.setState({tooltipData:undefined});}},{key:\"updateTooltipData\",value:function updateTooltipData(data){this.setState({tooltipData:data});}},{key:\"updateSize\",value:function updateSize(containerElement){if(containerElement!==null){var width=containerElement.clientWidth,height=containerElement.clientHeight;this.setState({dimensions:{width:width,height:height}});}}},{key:\"componentDidUpdate\",value:function componentDidUpdate(prevProps){var selectedRowIndex=this.props.selectedRowIndex;if(selectedRowIndex!==prevProps.selectedRowIndex){var data;if(this.state.displayMode===\"waterfall\"){data=this.getDataForWaterfall();}else{data={children:[{title:\"Negative\",children:this.getPositiveChildren(),color:\"none\"},{title:\"Positive\",children:this.getNegativeChildren(),color:\"none\"}]};}this.setState({data:data});}}},{key:\"getDataForWaterfall\",value:function getDataForWaterfall(){var selectedRowIndex=this.props.selectedRowIndex;if(selectedRowIndex===undefined)return[];var children=[];var selectedRow=this.props.data[selectedRowIndex];this.props.features.forEach(function(feature){var value=selectedRow[feature];var newChild={x:feature,y:value,color:value<0?COLORS.red:COLORS.green};var insertIndex=children.findIndex(function(_ref2){var y=_ref2.y;return y>value;});if(insertIndex===-1){children.push(newChild);}else{children.splice(insertIndex,0,newChild);}});return children.reduce(function(collector,child,index){return[].concat(_toConsumableArray(collector),[index>0?_objectSpread(_objectSpread({},child),{},{y:collector[index-1].y+child.y,y0:collector[index-1].y}):_objectSpread(_objectSpread({},child),{},{y0:0})]);},[]);}},{key:\"getPositiveChildren\",value:function getPositiveChildren(){return this.getChildren(true);}},{key:\"getNegativeChildren\",value:function getNegativeChildren(){return this.getChildren(false);}},{key:\"getChildren\",value:function getChildren(returnPositiveChilren){var selectedRowIndex=this.props.selectedRowIndex;if(selectedRowIndex===undefined)return[];var children=[];var selectedRow=this.props.data[selectedRowIndex];var color=returnPositiveChilren?COLORS.green:COLORS.red;this.props.features.forEach(function(feature){var value=selectedRow[feature];if(!returnPositiveChilren&&value<0||returnPositiveChilren)children.push({title:feature,size:Math.abs(value),color:color});});return children;}},{key:\"componentDidMount\",value:function componentDidMount(){var searchParams=new URLSearchParams(window.location.search);var displayMode;switch(searchParams.get(\"v\")){case\"b\":displayMode=\"circlePack\";break;case\"t\":displayMode=\"resquarify\";break;default:displayMode=\"waterfall\";break;}this.setState({displayMode:displayMode});}}]);return LocalExplanation;}(Component);","map":{"version":3,"sources":["/Users/tomlaczik/research/src/components/LocalExplanation/LocalExplanation.js"],"names":["React","Component","FlexibleXYPlot","HorizontalGridLines","Treemap","VerticalBarSeries","XAxis","YAxis","Tooltip","COLORS","red","green","LocalExplanation","props","state","dimensions","width","height","displayMode","resetTooltipData","bind","updateTooltipData","updateSize","getPositiveChildren","getNegativeChildren","getChildren","getDataForWaterfall","selectedRowIndex","data","tooltipData","undefined","title","x","size","y","y0","color","args","console","log","setState","containerElement","clientWidth","clientHeight","prevProps","children","selectedRow","features","forEach","feature","value","newChild","insertIndex","findIndex","push","splice","reduce","collector","child","index","returnPositiveChilren","Math","abs","searchParams","URLSearchParams","window","location","search","get"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\nimport {\n  FlexibleXYPlot,\n  HorizontalGridLines,\n  Treemap,\n  VerticalBarSeries,\n  XAxis,\n  YAxis,\n} from \"react-vis\";\nimport { Tooltip } from \"..\";\n\nimport \"./LocalExplanation.css\";\n\nconst COLORS = {\n  red: \"#bf212f\",\n  green: \"#006f3c\",\n};\n\nexport class LocalExplanation extends Component {\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      dimensions: { width: 0, height: 0 },\n      displayMode: \"resquarify\",\n    };\n\n    this.resetTooltipData = this.resetTooltipData.bind(this);\n    this.updateTooltipData = this.updateTooltipData.bind(this);\n    this.updateSize = this.updateSize.bind(this);\n\n    this.getPositiveChildren = this.getPositiveChildren.bind(this);\n    this.getNegativeChildren = this.getNegativeChildren.bind(this);\n    this.getChildren = this.getChildren.bind(this);\n\n    this.getDataForWaterfall = this.getDataForWaterfall.bind(this);\n  }\n\n  render() {\n    const { selectedRowIndex } = this.props;\n    const { data, dimensions, displayMode, tooltipData } = this.state;\n\n    return (\n      <section\n        id=\"treemap-container\"\n        ref={this.updateSize}\n        onMouseLeave={this.resetTooltipData}\n      >\n        {selectedRowIndex === undefined ? (\n          \"Select a row in the table below\"\n        ) : (\n          <>\n            {displayMode === \"waterfall\" ? (\n              <FlexibleXYPlot xType=\"ordinal\">\n                <HorizontalGridLines />\n                <VerticalBarSeries\n                  data={data}\n                  colorType=\"literal\"\n                  onValueMouseOver={(data) =>\n                    this.updateTooltipData({\n                      title: data.x,\n                      size: data.y - data.y0,\n                      color: data.color,\n                    })\n                  }\n                />\n                <XAxis title=\"Feature\" tickLabelAngle={270} />\n                <YAxis title=\"Contribution\" />\n              </FlexibleXYPlot>\n            ) : (\n              <Treemap\n                title={\"Test\"}\n                data={data}\n                mode={displayMode}\n                hideRootNode\n                colorType=\"literal\"\n                onLeafMouseOver={({ data }) => this.updateTooltipData(data)}\n                onLeafClick={(...args) => console.log(\"klikk\", [args])}\n                padding={1}\n                margin={0}\n                {...dimensions}\n              />\n            )}\n            <Tooltip data={tooltipData} />\n          </>\n        )}\n      </section>\n    );\n  }\n\n  resetTooltipData() {\n    this.setState({ tooltipData: undefined });\n  }\n\n  updateTooltipData(data) {\n    this.setState({ tooltipData: data });\n  }\n\n  updateSize(containerElement) {\n    if (containerElement !== null) {\n      const { clientWidth: width, clientHeight: height } = containerElement;\n      this.setState({ dimensions: { width, height } });\n    }\n  }\n\n  componentDidUpdate(prevProps) {\n    const { selectedRowIndex } = this.props;\n    if (selectedRowIndex !== prevProps.selectedRowIndex) {\n      let data;\n      if (this.state.displayMode === \"waterfall\") {\n        data = this.getDataForWaterfall();\n      } else {\n        data = {\n          children: [\n            {\n              title: \"Negative\",\n              children: this.getPositiveChildren(),\n              color: \"none\",\n            },\n            {\n              title: \"Positive\",\n              children: this.getNegativeChildren(),\n              color: \"none\",\n            },\n          ],\n        };\n      }\n      this.setState({\n        data,\n      });\n    }\n  }\n\n  getDataForWaterfall() {\n    const { selectedRowIndex } = this.props;\n\n    if (selectedRowIndex === undefined) return [];\n\n    const children = [];\n\n    const selectedRow = this.props.data[selectedRowIndex];\n\n    this.props.features.forEach((feature) => {\n      const value = selectedRow[feature];\n      const newChild = {\n        x: feature,\n        y: value,\n        color: value < 0 ? COLORS.red : COLORS.green,\n      };\n\n      const insertIndex = children.findIndex(({ y }) => y > value);\n\n      if (insertIndex === -1) {\n        children.push(newChild);\n      } else {\n        children.splice(insertIndex, 0, newChild);\n      }\n    });\n\n    return children.reduce(\n      (collector, child, index) => [\n        ...collector,\n        index > 0\n          ? {\n              ...child,\n              y: collector[index - 1].y + child.y,\n              y0: collector[index - 1].y,\n            }\n          : { ...child, y0: 0 },\n      ],\n      []\n    );\n  }\n\n  getPositiveChildren() {\n    return this.getChildren(true);\n  }\n\n  getNegativeChildren() {\n    return this.getChildren(false);\n  }\n\n  getChildren(returnPositiveChilren) {\n    const { selectedRowIndex } = this.props;\n\n    if (selectedRowIndex === undefined) return [];\n\n    const children = [];\n\n    const selectedRow = this.props.data[selectedRowIndex];\n    const color = returnPositiveChilren ? COLORS.green : COLORS.red;\n    this.props.features.forEach((feature) => {\n      const value = selectedRow[feature];\n      if ((!returnPositiveChilren && value < 0) || returnPositiveChilren)\n        children.push({ title: feature, size: Math.abs(value), color });\n    });\n    return children;\n  }\n\n  componentDidMount() {\n    const searchParams = new URLSearchParams(window.location.search);\n\n    let displayMode;\n    switch (searchParams.get(\"v\")) {\n      case \"b\":\n        displayMode = \"circlePack\";\n        break;\n      case \"t\":\n        displayMode = \"resquarify\";\n        break;\n      default:\n        displayMode = \"waterfall\";\n        break;\n    }\n    this.setState({ displayMode });\n  }\n}\n"]},"metadata":{},"sourceType":"module"}